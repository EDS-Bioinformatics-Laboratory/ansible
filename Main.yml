---
- name: Main orchestration playbook
  hosts: all
  vars_files:
    - config.yml
  remote_user: "{{ username }}"
  become: yes
  connection: local
  gather_facts: false
  
  tasks:
    - name: Run general playbook
      ansible.builtin.include_tasks:
        file: tasks/General.yml
      when: run_general | default(true)
      tags:
        - general

    - name: Run Conda playbook
      ansible.builtin.include_tasks:
        file: tasks/Conda.yml
      when: run_Conda | default(true)
      tags:
        - Conda
        
   - name: Run VScode playbook
      ansible.builtin.include_tasks:
        file: tasks/Vscode.yml
      when: run_Vscode | default(true)
      tags:
        - vscode

   - name: Run Julia playbook
      ansible.builtin.include_tasks:
        file: tasks/Julia.yml
      when: run_Julia | default(true)
      tags:
        - julia


   - name: Run Compilers playbook
      ansible.builtin.include_tasks:
        file: tasks/Compilers.yml
      when: run_Compilers | default(true)
      tags:
        - compilers
        
   - name: Run Containers playbook
      ansible.builtin.include_tasks:
        file: tasks/Containers.yml
      when: run_Containers | default(true)
      tags:
        - containers

    - name: Run Emacs playbook
      ansible.builtin.include_tasks:
        file: tasks/Emacs.yml
      when: run_Emacs | default(true)
      tags:
        - emacs
    
    - name: Run R playbook
      ansible.builtin.include_tasks:
        file: tasks/R.yml
      when: run_R | default(true)
      tags:
        - R
        
    - name: Run bashrc playbook
      ansible.builtin.include_tasks:
        file: tasks/Bashrc.yml
      when: run_Bashrc | default(true)
      tags:
        - bashrc